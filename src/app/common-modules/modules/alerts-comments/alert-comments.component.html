<span (click)="getCommentData(getRowDataOnClick,closePop,modalContent)" permission [domainPermission]="permissionIdsList | getPermissionId : 'comment Box'" [PemissionHide]='true'>
    <i class="material-icons"
    [class.text-dark-pastal-green]="customTemplateClass == 'caselist-component' && commentListItemsCount > 0">
    chat
</i>
<span class="count" matTooltipPosition="left"
[matTooltip]="commentListItemsCount?.toString().length > 3 ? commentListItemsCount : ''"
[class.text-dark-pastal-green]="customTemplateClass == 'caselist-component' && commentListItemsCount > 0">{{commentListItemsCount}}</span>
</span>
<ng-template #modalContent let-modal>
    <div class="modal-header">
        <div class="f-16 font-weight-bold text-capitalize text-dark-black text-on-surface">{{'Comments' | translate}} <span
            *ngIf="commentListItems.length">({{commentListItems.length}})</span></div>
      <button type="button" class="close material-icons text-dark-black text-on-surface" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
        <div class="card-body pad-x0 height-100 pad-t0 pad-b30 p-rel custom-scroll-wrapper">
            <div class="text-center text-on-surface vla-loader position-absolute d-flex align-items-center justify-content-center"
                *ngIf="showFileSpinner">
                <i class="fa fa-spinner txt-on-surface-06 fa-pulse font-size-4"></i>
            </div>

            <ul #scrollMe class="list-unstyled height-80 custom-scroll-wrapper overflow-a user-details-wrapper">
                <li class="media d-flex light-theme-border-bottom" *ngFor="let data of commentListItems; let i = index">
                    <div>
                        <ng-container *ngIf="data.commentedBy.userImage else imagePlaceholder">
                            <img class="list-img image-placeholder" [src]="'data:image/gif;base64,' + data.commentedBy.userImage" alt="">
                        </ng-container>
                        <ng-template #imagePlaceholder>
                            <span class="image-placeholder f-10">
                                {{ data?.commentedBy?.firstName ?  data.commentedBy.firstName.charAt(0).toUpperCase() : ''  }}{{ data?.commentedBy?.lastName ? data.commentedBy.lastName.charAt(0).toUpperCase() : '' }}</span>
                        </ng-template>

                    </div>

                    <div class=" media-body">
                        <h5 class="f-16 ai-c mar-l5 d-flex mb-3 px-2 justify-content-between font-weight-bold">
                            <span class="text-dark-black text-on-surface">
                                {{data.commentedBy.screenName}}
                            </span>
                            <div class="d-flex">
                                <span
                                    class="text-on-surface light-theme-light-color">{{data.createdDate | date:(dateFormat.ShortDateFormat+' '+dateFormat.ShortTimeFormat) }}</span>
                            </div>
                        </h5>
                        <div class="media mt-3 f-14">
                            <p class="time-list f-12 mar-l10 text-dark-black w-100 word-bw">{{data.comments}}</p>
                        </div>
                        <ul class="list-group f-14">
                            <li class="list-group-item document light theme px-2 f-14 d-flex" *ngFor="let attach of data.attachment;trackBy:trackByDocName">
                                <span class="c-pointer"><i class="fa fa-file" aria-hidden="true"></i></span> <span
                                    class="mar-l5 c-pointer dots-text" (click)="getDownload(attach)">
                                    {{attach.docName}}</span>
                            </li>
                        </ul>
                    </div>
                </li>
            </ul>

            <ul class="list-unstyled custom-scroll-wrapper overflow-a height-20">
               <i>
                <ul class="list-group f-14 mb-0"
                *ngIf="true">
                <li class="file-attachment" *ngFor="let attach of attachmentList; let i = index">
                    <span class="c-pointer icon"><i class="fa fa-file" aria-hidden="true"></i></span>
                    <span class="mar-l5 c-pointer dots-text doc-name">{{attach.name}}</span>
                    <button type="button" class="close-btn" [matTooltip]="'Delete' | translate"
                        matTooltipPosition="above" (click)="removeAttachment(i)">
                        <span class="material-icons-round close-icon">close</span>
                    </button>
                </li>
            </ul>
               </i>
            <i> <div class="bst_input_group p-abs b-0 l-0 custom-input-in-card-body" [class.c-ban]="commentBoxPermissionView">
                <form (ngSubmit)="commentMssgData(f.form.value,getRowDataOnClick)" #f="ngForm" autocomplete="off" permission [disabled]="commentBoxPermissionView">

                    <input type="text" #name="ngModel" placeholder="Type something" maxlength="3072"
                        name="commentMssgForValid" [(ngModel)]="commentMssg" (input)="filterItem(commentMssg)"
                        (click)="showList()" [(value)]="commentMssg"
                        class="custom-input input-text border-0 width-100 bg-transparent pt-3" required
                        autocomplete="off" />

                    <div (click)="fileAttach($event)">
                        <span id="filesUpload"
                            class="fa fa-paperclip c-pointer papericon icon-right pull-right t-25 mt-2 pt-1">
                        </span></div>
                    <input type="file" id="fileAttachment" #fileupload class="display-none"
                        name="myFile" (change)="fileUpload(fileupload.files)" multiple />
                    <button type="submit" style="display:none;"></button>
                </form>
            </div></i>
            </ul>

            <div class="autocomplete-options custom-scroll-wrapper light-theme-bg-white"
                *ngIf="filteredItems?.length && showListItems">
                <ng-container *ngFor="let item of filteredItems;trackBy:trackByDisplayName">
                    <p class="c-pointer option w-100 text-dark-black text-on-surface" *ngIf="showListItems"
                        (click)="addItem(item.displayName)">{{item.code}}</p>
                </ng-container>
            </div>
        </div>
        {{queueName}}
    </div>
  </ng-template>
<ng-container *ngIf="customTemplateClass != 'caselist-component'">
    <span popoverClass="alert-card-popover light-theme alert-popup" placement="bottom" container="body"
        *ngIf="isSystemCreated"
        permission [domainPermission]="permissionIdsList | getPermissionId : 'quick Info'">
        <ng-container *ngIf="AutoOpen">
            <button class="bg-transparent border-0" id="entity-identification-icon"
                (click)="setCurrentRowData();openAlertCard(alertCardBody,true)"><i class="material-icons">info
                </i> </button>
        </ng-container>
        <ng-container *ngIf="!AutoOpen">
            <button class="bg-transparent border-0" (click)="setCurrentRowData();openAlertCard(alertCardBody,true)">
                <i class="material-icons">info
                </i> </button>
        </ng-container>

    </span>
</ng-container>


<span popoverClass="alert-card-popover light-theme alert-popup" container="body"
    *ngIf="!isSystemCreated">

    <ng-container *ngIf="AutoOpen">
        <button class="bg-transparent border-0" id="entity-identification-icon"
            (click)="setCurrentRowData();open(content);openEICard()"><i class="material-icons">info
            </i> </button>
    </ng-container>
    <ng-container *ngIf="!AutoOpen">
        <button class="bg-transparent border-0" (click)="setCurrentRowData();open(content);openEICard()"><i
                class="material-icons">info
            </i> </button>
    </ng-container>
</span>


<ng-template #content let-modal>
    <div class="modal-header d-flex light-theme-border-bottom align-items-center">
        <h4 class="modal-title f-20 text-dark-black d-flex align-items-center gotham-medium" id="modal-basic-title">
            <button *ngIf="!alertPopUpByEntity && prevButton == true" class="pn-btn border-0 ml-2 light-theme-surface" (click)="getPrevRow()"><i class="material-icons"
                tooltipClass="light-theme-tooltip" ngbTooltip="{{'Previous'| translate}}">keyboard_arrow_up
            </i> </button>
            <button *ngIf="!alertPopUpByEntity && prevButton == false" class="pn-btn border-0 ml-2 light-theme-surface btn-disabled" [disabled]="prevButton == false" (click)="getPrevRow()"><i class="material-icons"
                tooltipClass="light-theme-tooltip" ngbTooltip="{{'Previous'| translate}}">keyboard_arrow_up
            </i> </button>
            <button *ngIf="!alertPopUpByEntity && nextButton == true" class="pn-btn border-0 light-theme-surface ml-2" (click)="getNextRow()"><i class="material-icons"
                tooltipClass="light-theme-tooltip" ngbTooltip="{{'Next'| translate}}">keyboard_arrow_down
            </i> </button>
            <button *ngIf="!alertPopUpByEntity && nextButton == false" class="pn-btn border-0 light-theme-surface ml-2 btn-disabled" [disabled]="nextButton == false" (click)="getNextRow()"><i class="material-icons"
                tooltipClass="light-theme-tooltip" ngbTooltip="{{'Next'| translate}}">keyboard_arrow_down
            </i> </button>
            <span><i class="material-icons text-dark-black mr-2 ml-2">{{entityDetails['type-icon']}}</i> <span>{{entityDetails['name']}}</span></span>
        </h4>
        <div>
                <span [PemissionHide]='true' permission [domainPermission]="permissionIdsList | getPermissionId : 'comment Box'" >
                    <span (click)="getCommentDataForAlertCard(getRowDataOnClick,modalContent)">
                        <i class="material-icons alert-card-text-dark-black">
                        chat
                        </i>
                    </span>
                <span matTooltipPosition="left" class="count text-dark-black align-top"
                [matTooltip]="commentListItemsCount?.toString().length > 3 ? commentListItemsCount : ''">{{commentListItemsCount}}</span>
                </span>

            <span class="clockIcon c-pointer" permission
                [domainPermission]="permissionIdsList | getPermissionId : 'alert Auditing'"
                (click)="showRightPanel(alertlist)" style="margin-right: 15px;">
                <i class="material-icons">
                    restore
                </i>
            </span>
            <button *ngIf="!alertPopUpByEntity" type="button" class=" bg-transparent border-0 closeMe closeMe" aria-label="Close"
                (click)="closeModal()">
                <i class="material-icons f-25 text-on-surface text-dark-black opct-87">close</i>
            </button>

        </div>

    </div>
    <div class="modal-body mt-4 overflow-hidden">
        <div class="pr-4">
            <h3 class="f-14 text-dark-black font-medium gotham-medium mar-b0">
                {{'Search criteria'| translate}} :
            </h3>
        </div>
        <div class="search-data d-flex ai-c mar-b20 light-theme-surface light-theme-no-radius"
            *ngIf="searchData && searchData !==''">

            <!-- entity type -->
            <div class="pr-5 d-flex ai-c">
                <span *ngIf="searchData.name" class="mr-2">
                    <i class="material-icons f-20 text-dark-black" *ngIf="searchData.entity_type ==='person'">
                        person
                    </i>
                    <i class="material-icons f-20 text-dark-black" *ngIf="searchData.entity_type ==='organization'">
                        business
                    </i>
                </span>
                <span class="f-16 font-medium text-capitalize text-dark-black ml-2"
                    [ngClass]="(this.currentRowData.completeRowData.mainEntityUrl ? 'alert-id linked-text c-pointer' : '')"
                    (click)="navigateToEntity(this.currentRowData.completeRowData.mainEntityUrl)">{{searchData.name}}
                </span>
            </div>


            <!-- entity Id -->
            <div class="pr-5 d-flex ai-c">
                <span class="ml-5 f-16 font-medium text-dark-black">
                    <div class="mb-2">{{'Alert ID' | translate}}: {{alert_ID}}</div>
                    <div>
                        <ng-container *ngIf="!alertMetaData?.is_synthetic_entity_id">
                            <span class="mr-2" *ngIf="searchData.entity_id">
                            <i class="material-icons f-16 text-dark-black">
                                code
                            </i>

                        </span>
                        <span class="f-16 font-medium text-capitalize text-dark-black ml-2 ">{{searchData.entity_id}}
                        </span>
                        </ng-container>
                    </div>
                </span>



                <span class="ml-5 f-16 font-medium text-dark-black">
                    <div *ngIf="alertMetaData.tenantName" class="mb-2">Tenant Name: {{ alertMetaData.tenantName }}</div>
                    <div>{{'Tenant ID' | translate}}: {{ alertMetaData.tenantId || 'n/a' }}</div>
                </span>



                <span class="ml-5 f-16 font-medium text-dark-black">
                    <div class="mb-2">{{ 'Main Entity' | translate }}:
                        <span
                            [ngClass]="(this.currentRowData.completeRowData.primaryEntityUrl ? 'alert-id linked-text c-pointer' : 'text-white')"
                            (click)="navigateToEntity(this.currentRowData.completeRowData.primaryEntityUrl)">
                            {{this.currentRowData.completeRowData.primaryEntityName}}</span>
                    </div>
                    <div class="">{{ 'Relationship' | translate }}: {{this.currentRowData.completeRowData.primaryEntityRelationshipType}}</div>
                </span>

                <span class="ml-5 f-16 font-medium text-dark-black" style="margin-top: 20px;">
                    <div class="mb-2">{{ 'Case ID' | translate }}: <span *ngIf="getRowDataOnClick['relatedCaseId']; else pending" [ngClass]="{'alert-id linked-text c-pointer' : caseDetailsPermission && caseDetailsPermission !== 'none'}" (click)="openCase(getRowDataOnClick['relatedCaseId'])">{{ getRowDataOnClick['relatedCaseId'] }}</span></div>
                    <ng-template #pending> &nbsp; - </ng-template>
                        <!-- country -->
                        <div class="mb-2 pr-5 d-flex ai-c">
                            <ng-container *ngIf="searchData.entity_type ==='organization'">
                                <span *ngIf="searchData.jurisdiction"
                                    class=" mr-2 f-16 flag-icon flag-icon-squared flag-icon-{{searchData.jurisdiction.toLowerCase()}}"></span>
                                <span class="f-16 font-medium text-capitalize text-dark-black ml-2 "
                                    *ngIf="searchData.jurisdiction">{{fullJursidictionName(searchData.jurisdiction) }}
                                </span>
                            </ng-container>
                            <ng-container
                                *ngIf="searchData.place_of_birth && Array.isArray(searchData.place_of_birth) && searchData.place_of_birth.length > 0 ">
                                <span *ngIf="searchData.place_of_birth[0] "
                                    class="mr-2 f-16 flag-icon flag-icon-squared flag-icon-{{searchData.place_of_birth[0].toLowerCase()}}"></span>
                                <span class="f-16 font-medium text-capitalize text-dark-black ml-2 "
                                    *ngIf="searchData.place_of_birth[0]">{{fullJursidictionName(searchData.place_of_birth[0]) }}
                                </span>
                            </ng-container>

                            <ng-container
                                *ngIf="!(searchData.place_of_birth && Array.isArray(searchData.place_of_birth) && searchData.place_of_birth.length > 0) &&  searchData.place_of_birth">
                                <span *ngIf="searchData.place_of_birth && !Array.isArray(searchData.place_of_birth)"
                                    class="mr-2 f-16 flag-icon flag-icon-squared flag-icon-{{searchData.place_of_birth.toLowerCase()}}"></span>
                                <span class="f-16 font-medium text-capitalize text-dark-black ml-2 "
                                    *ngIf="searchData.place_of_birth && !Array.isArray(searchData.place_of_birth)">{{fullJursidictionName(searchData.place_of_birth) }}
                                </span>
                            </ng-container>

                            <ng-container
                                *ngIf="searchData.place_of_registration && Array.isArray(searchData.place_of_registration) && searchData.place_of_registration.length > 0 && searchData.entity_type ==='organization' && searchData.jurisdiction && searchData.jurisdiction ===''">
                                <span *ngIf="searchData.place_of_registration[0]"
                                    class="mr-2 f-16 flag-icon flag-icon-squared flag-icon-{{searchData.place_of_registration[0].toLowerCase()}}"></span>
                                <span class="f-16 font-medium text-capitalize text-dark-black ml-2 "
                                    *ngIf="searchData.place_of_registration[0]">{{fullJursidictionName(searchData.place_of_registration[0]) }}
                                </span>
                            </ng-container>

                            <ng-container
                                *ngIf="!(searchData.place_of_registration && Array.isArray(searchData.place_of_registration) && searchData.place_of_registration.length > 0) &&  searchData.place_of_registration && searchData.entity_type ==='organization' && searchData.jurisdiction && searchData.jurisdiction ===''">
                                <span *ngIf="searchData.place_of_registration && !Array.isArray(searchData.place_of_registration)"
                                    class="mr-2 f-16 flag-icon flag-icon-squared flag-icon-{{searchData.place_of_registration.toLowerCase()}}"></span>
                                <span class="f-16 font-medium text-capitalize text-dark-black ml-2 "
                                    *ngIf="searchData.place_of_registration && !Array.isArray(searchData.place_of_registration)">{{fullJursidictionName(searchData.place_of_registration) }}
                                </span>
                            </ng-container>

                        </div>
                        <!-- date -->
                        <div class="pd-5 d-flex ai-c">
                            <ng-container
                                *ngIf="(searchData.date_of_registration && Array.isArray(searchData.date_of_registration) && searchData.date_of_registration.length > 0  )  ||  (searchData.date_of_birth && Array.isArray(searchData.date_of_birth) && searchData.date_of_birth.length > 0 ) ">

                                <span class="f-16  font-medium text-capitalize text-dark-black ml-2 "
                                    *ngIf="( searchData.date_of_registration && Array.isArray(searchData.date_of_registration) && searchData.date_of_registration.length > 0  ) && (searchData.date_of_registration[0] !=null && searchData.date_of_registration[0] !='')">
                                    <span class="mr-2">
                                        <i class="fa fa-calendar nav-link-icon f-19"></i>
                                    </span>
                                    {{ searchData.date_of_registration[0] | dateTranslated }}
                                </span>
                                <span class="f-16 font-medium text-capitalize text-dark-black ml-2 "
                                    *ngIf=" (searchData.date_of_birth  && Array.isArray(searchData.date_of_birth) && searchData.date_of_birth.length > 0 ) && (searchData.date_of_birth[0]!=null && searchData.date_of_birth[0]!='')">
                                    <span class="mr-2">
                                        <i class="fa fa-calendar nav-link-icon f-19"></i>
                                    </span>
                                    {{ searchData.date_of_birth[0] | dateTranslated }}
                                </span>
                            </ng-container>


                            <ng-container
                                *ngIf=" !((searchData.date_of_registration && Array.isArray(searchData.date_of_registration) && searchData.date_of_registration.length > 0  )  ||  (searchData.date_of_birth && Array.isArray(searchData.date_of_birth) && searchData.date_of_birth.length > 0 ) ) ">
                                <span class="f-16  font-medium text-capitalize text-dark-black text-white  ml-2 "
                                    *ngIf="searchData.date_of_registration && !(Array.isArray(searchData.date_of_registration))">
                                    <span class="mr-2">
                                        <i class="fa fa-calendar nav-link-icon f-19"></i>
                                    </span>
                                    {{ searchData.date_of_registration | dateTranslated }}
                                </span>
                                <span class="f-16 font-medium text-capitalize text-dark-black ml-2 "
                                    *ngIf="searchData.date_of_birth && !(Array.isArray(searchData.date_of_birth))">
                                    <span class="mr-2">
                                        <i class="fa fa-calendar nav-link-icon f-19"></i>
                                    </span>
                                    {{ getFormantDate(searchData.date_of_birth) | dateTranslated }}
                                </span>
                            </ng-container>
                        </div>
                </span>
            </div>

            <div class="d-flex ai-c relatedCountBtn" *ngIf="!alertPopUpByEntity">
                <button type="button" class="btn btn-link" [disabled]="relatedAlertsCount == 0" (click)="RelatedAlertsClick()">{{'Related Alerts' | translate}}
                    <span>{{ relatedAlertsCount }}</span>
                </button>
            </div>
        </div>
        <div class="row height-90">
            <div class="col-md-1 height-100 z-999 pr-0 ">
                <div class="sidebar light-theme-surface">
                    <ul class="d-block custom-list-wrapper pad-l0 list-unstyled">
                        <li class="text-center">
                            <a (click)="RightPanelIntial($event,'general')"
                                [ngClass]="{'active':activeTab =='general'}"><i
                                    class="fa fa-list-ul text-dark-black"></i></a>
                        </li>
                        <li class="text-center">
                            <a (click)="RightPanelIntial($event,'vla')" [ngClass]="{'active':activeTab =='vla'}"><i
                                    class="material-icons c-pointer text-dark-black">bubble_chart</i></a>
                        </li>
                        <li class="text-center">
                            <a (click)="RightPanelIntial($event,'related')" [ngClass]="{'active':activeTab =='related'}"><i
                                    class="material-icons c-pointer text-dark-black">warning</i></a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-md-11 tabcontent" id="general">
                <div class="row">
                    <div class="col-md-5 height-100 pl-0">
                        <div class="match-slider mb-4">

                            <div class="d-flex jc-sb align-c">
                                <div class="row col-12" style="padding-bottom: 60px;">
                                    <p class="d-inline-block f-14 mr-3 text-dark-black text-on-surface">
                                        {{'Please review the attributes and choose which entity is right' | translate}}
                                    </p>
                                </div>
                                <div class="row col-12" style="position: absolute; padding-right: 0;">
                                    <div class="col-5" style="padding-left: 0; padding-right: 0;">
                                        <div permission [domainPermission]="permissionIdsList | getPermissionId : 'confidence Level Filter'">
                                            <p class="f-14 text-dark-black text-on-surface">{{'confidenceLevelFilter' | translate}}</p>
                                        </div>
                                    </div>
                                    <div class="col-7" style="display: flex;">
                                        <mat-slider [max]="100" [min]="0" [step]="1" [value]="0" [thumbLabel]='true' [(ngModel)]="confidenceFilter"
                                            class="mt-4"></mat-slider>
                                        <div class="f-14 text-on-surface text-dark-black">
                                            {{confidenceFilter}}%
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class=" table-responsive mt-3 rounded entity-table custom-scroll-wrapper scroll-info"
                            tabindex="1">
                            <table class="table mb-0">
                                <thead class="light-theme-surface">
                                    <tr>
                                        <th class="w-50"></th>
                                        <th class="text-dark-black f-14 va-m" *ngIf="entityType == 'person'">
                                            {{'Name' | translate}}</th>
                                        <th class="text-dark-black f-14 va-m" *ngIf="entityType != 'person'">
                                            {{'Name' | translate}}
                                        </th>
                                        <th class="text-dark-black f-14 va-m">{{'Country' | translate}} </th>
                                        <th class="text-dark-black f-14 d-flex">
                                            {{'ConfidenceLevel' | translate}}
                                            <span class="material-icons">
                                                arrow_downward
                                            </span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>

                                    <ng-container *ngIf="watchlistData.length">
                                        <ng-container *ngFor="let list of watchlistData; let i =  index" >
                                            <tr class="light-theme-border-bottom c-pointer"
                                            [ngClass]="{'active-watch':selectedWatchListIndex == i, 'not-active':selectedWatchListIndex != i && currentAlertStatus == 'identityapproved', 'disabled': isDisable && selectedWatchListIndex != i}"
                                            *ngIf="getConfidencePercentage( (list && list.confidence ) ? list.confidence : 0  ) >= confidenceFilter"
                                            (click)="selectedWatchList(i)">
                                                <td class="text-dark-black text-center align-middle">
                                                    <mat-radio-button (change)="selectedWatchList(i)"
                                                        name="selectedWatchList" [value]="i"
                                                        [checked]="selectedWatchListIndex == i">
                                                    </mat-radio-button>
                                                </td>
                                                <!-- <td class="text-dark-black align-middle" *ngIf="entityType == 'person'">
                                                    <span class="pr-2"
                                                        *ngIf="list && list.basic_info && list.basic_info.FirstName">
                                                        {{ (list && list.basic_info && list.basic_info.FirstName )? list.basic_info.FirstName : 'N/A'}}
                                                    </span>
                                                    <span class="pr-2"
                                                        *ngIf="list && list.basic_info && list.basic_info.first_name">
                                                        {{ (list && list.basic_info && list.basic_info.first_name )? list.basic_info.first_name : 'N/A'}}
                                                    </span>
                                                    <span class="pr-2"
                                                        *ngIf="list && list.basic_info && list.basic_info.firstName">
                                                        {{ (list && list.basic_info && list.basic_info.firstName )? list.basic_info.firstName : 'N/A'}}
                                                    </span>
                                                    <span class="pr-2"
                                                        *ngIf="list && list.basic_info && list.basic_info.firstname">
                                                        {{ (list && list.basic_info && list.basic_info.firstname )? list.basic_info.firstname : 'N/A'}}
                                                    </span>
                                                    <span *ngIf="list && list.basic_info && list.basic_info.lastname">
                                                        {{ (list && list.basic_info && list.basic_info.lastname ) ? list.basic_info.lastname : 'N/A'}}
                                                    </span>
                                                    <span *ngIf="list && list.basic_info && list.basic_info.last_name">
                                                        {{ (list && list.basic_info && list.basic_info.last_name ) ? list.basic_info.last_name : 'N/A'}}
                                                    </span>
                                                    <span *ngIf="list && list.basic_info && list.basic_info.LastName">
                                                        {{ (list && list.basic_info && list.basic_info.LastName ) ? list.basic_info.LastName : 'N/A'}}
                                                    </span>
                                                    <span *ngIf="list && list.basic_info && list.basic_info.lastName">
                                                        {{ (list && list.basic_info && list.basic_info.lastName ) ? list.basic_info.lastName : 'N/A'}}
                                                    </span>
                                                </td> -->
                                                <td class="text-dark-black  align-middle">
                                                    {{ (list && list.basic_info.primary_name ) ? list.basic_info.primary_name : ((list && list.basic_info.name ) ? list.basic_info.name : "N/A")  }}
                                                </td>
                                                <td class="text-dark-black  align-middle"
                                                    *ngIf="entityType == 'person' && (list && list.basic_info && list.basic_info['place_of_birth'] && Array.isArray(list.basic_info['place_of_birth']) ) ">
                                                    {{ (list && list.basic_info &&   list.basic_info['place_of_birth'].length > 0 && list.basic_info['place_of_birth'][0] ) ? list.basic_info['place_of_birth'][0] : 'N/A' }}
                                                    <span
                                                        *ngIf="(list && list.basic_info &&  list.basic_info['place_of_birth'].length > 0 && list.basic_info['place_of_birth'][0] ) && (flags && flags[list.basic_info['place_of_birth'][0]]) "
                                                        class="flag-icon mar-x5 text-cream flag-icon-squared flag-wrapper flag-pop c-pointer f-9 flag-icon-{{list.attributes['place_of_birth'][0].toLowerCase()}}"
                                                        style="display: block;"></span>
                                                </td>


                                                <td class="text-dark-black  align-middle"
                                                    *ngIf="entityType == 'person' && !(list && list.basic_info && list.basic_info['place_of_birth'] && Array.isArray(list.basic_info['place_of_birth']))">
                                                    {{ (list && list.basic_info && list.basic_info['place_of_birth'] ) ? list.basic_info['place_of_birth'] : 'N/A' }}
                                                    <span
                                                        *ngIf="(list && list.basic_info && list.basic_info['place_of_birth'] ) && (flags && flags[list.basic_info['place_of_birth']]) "
                                                        class="flag-icon mar-x5 text-cream flag-icon-squared flag-wrapper flag-pop c-pointer f-9 flag-icon-{{list.attributes['place_of_birth'].toLowerCase()}}"
                                                        style="display: block;"></span>
                                                </td>


                                                <td class="text-dark-black  align-middle"
                                                    *ngIf="entityType != 'person' && (list && list.basic_info && list.basic_info['place_of_registration'] && Array.isArray(list.basic_info['place_of_registration'])  ) ">
                                                    {{ list.basic_info['place_of_registration'].length > 0 && list.basic_info['place_of_registration'][0] ?  list.basic_info['place_of_registration'][0] : 'N/A' }}
                                                    <span
                                                        *ngIf="(list && list.basic_info &&  list.basic_info['place_of_registration'].length>0  && list.basic_info['place_of_registration'][0] ) && (flags && flags[list.basic_info['place_of_registration'][0]]) "
                                                        class="flag-icon mar-x5 text-cream flag-icon-squared flag-wrapper flag-pop c-pointer f-9 flag-icon-{{list.attributes['place_of_registration'][0].toLowerCase()}}"
                                                        style="display: block;"></span>
                                                </td>

                                                <td class="text-dark-black  align-middle"
                                                    *ngIf="entityType != 'person'  && ! (list && list.basic_info && list.basic_info['place_of_registration'] && Array.isArray(list.basic_info['place_of_registration']) ) ">
                                                    {{ (list && list.basic_info && list.basic_info['place_of_registration'] ) ? list.basic_info['place_of_registration'] : 'N/A' }}
                                                    <span
                                                        *ngIf="(list && list.basic_info && list.basic_info['place_of_registration'] ) && (flags && flags[list.basic_info['place_of_registration']]) "
                                                        class="flag-icon mar-x5 text-cream flag-icon-squared flag-wrapper flag-pop c-pointer f-9 flag-icon-{{list.attributes['place_of_registration'].toLowerCase()}}"
                                                        style="display: block;"></span>
                                                </td>

                                                <td class="text-dark-black  align-middle font-weight-bold f-20">
                                                    {{getConfidencePercentage( (list && list.confidence ) ? list.confidence : 0 )}}%
                                                </td>
                                            </tr>
                                        </ng-container>
                                    </ng-container>

                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-md-7 height-100">
                        <div class="pb-2 pl-2 entity-identification-card-attributes position-relative">
                            <div class="match-slider mb-4 position-absolute z-99" permission
                                [domainPermission]="permissionIdsList | getPermissionId : 'entity Information'">
                                <p class="d-inline-block f-14 mr-4 text-on-surface">
                                    {{'ShowMatchType' | translate}}
                                </p>
                                <label
                                    class="switch ml-2 align-top custom-switch-wrapper filters-switch-wrapper bst-switch-wrapper center-align">
                                    <input name="override" type="checkbox" [checked]="showMatchType"
                                        (change)="showMatchType = !showMatchType">
                                    <span class="slider round"></span>
                                </label>
                            </div>
                            <mat-tab-group animationDuration="0ms">
                                <mat-tab>
                                    <ng-template mat-tab-label>
                                        <span class="text-on-surface">{{'GeneralAttributes' | translate}}</span>
                                    </ng-template>
                                    <div permission [domainPermission]="permissionIdsList | getPermissionId : 'entity Information'"
                                        class="entity-info-st">
                                        <div class="table-responsive custom-scroll-wrapper info-table" tabindex="1">
                                            <table class="table border-0 m-0">
                                                <thead >
                                                    <tr class="pad-l3">
                                                        <th class="text-dark-black f-14 pad-l3">{{'Attribute' | translate}}
                                                        </th>
                                                        <th class="text-dark-black f-14 pad-l3">
                                                            {{'Record Information' | translate}}
                                                        </th>
                                                        <th class="text-dark-black f-14 pad-l3 w-55"></th>
                                                        <th class="text-dark-black f-14 pad-l3">
                                                            {{'Match Information' | translate}}
                                                        </th>
                                                        <th class="text-dark-black f-14 pad-l3" *ngIf="showMatchType">
                                                            {{'Match Type' | translate}}</th>
                                                    </tr>
                                                </thead>
                                                <tbody class="alternate-row-colors"
                                                    *ngIf="( watchlistData && watchlistData[0] && watchlistData[0].confidence) * 100 >= confidenceFilter">
                                                    <ng-container *ngFor="let item of attributesDetails">
                                                        <ng-container *ngIf="!item.watchlistAttrib" >
                                                            <ng-container *ngTemplateOutlet="attributesTemplate; context:{item:item ,watchlistAttribs:false} ">
                                                            </ng-container>
                                                        </ng-container>
                                                    </ng-container>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </mat-tab>
                                <mat-tab>
                                    <ng-template mat-tab-label>
                                        <span class="text-on-surface">{{'WatchlistAttributes' | translate}}</span>
                                    </ng-template>
                                    <div permission [domainPermission]="permissionIdsList | getPermissionId : 'entity Information'"
                                        class="entity-info-st">
                                        <div class="table-responsive custom-scroll-wrapper info-table" tabindex="1">
                                            <table class="table border-0 m-0">
                                                <thead >
                                                    <tr class="pad-l3">
                                                        <th class="text-dark-black f-14 pad-l3">{{'Attribute' | translate}}
                                                        </th>
                                                        <th class="text-dark-black f-14 pad-l3 w-55"></th>
                                                        <th class="text-dark-black f-14 pad-l3">
                                                            {{'Match Information' | translate}}
                                                        </th>
                                                        <th class="text-dark-black f-14 pad-l3" *ngIf="showMatchType">
                                                            {{'Match Type' | translate}}</th>
                                                    </tr>
                                                </thead>
                                                <tbody class="alternate-row-colors"
                                                    *ngIf="( watchlistData && watchlistData[0] && watchlistData[0].confidence) * 100 >= confidenceFilter">
                                                    <ng-container *ngFor="let item of attributesDetails">
                                                        <ng-container *ngIf="item.watchlistAttrib" >
                                                            <ng-container *ngTemplateOutlet="attributesTemplate; context:{item:item ,watchlistAttribs:true} ">
                                                            </ng-container>
                                                        </ng-container>
                                                    </ng-container>
                                                    <tr *ngIf="rolesText && rolesText.length > 0">
                                                        <td class="text-dark-black text-capitalize">{{'Roles' | translate}}</td>
                                                        <td class="w-55"></td>
                                                        <td class="text-dark-black text-capitalize" *ngIf="rolesText">
                                                            {{rolesText}}
                                                            <a class="d-inline-flex align-items-center ml-2 c-pointer primary-color readmore"
                                                                (click)="openRolesModal(rolesContent)">{{'Readmore'| translate}}</a>
                                                        </td>
                                                    </tr>
                                                    <tr *ngIf="referencesList.length > 0">
                                                        <td class="text-dark-black text-capitalize">{{'References' | translate}}
                                                        </td>
                                                        <td class="w-55"></td>
                                                        <td class="text-capitalize">
                                                            <a class="d-inline-flex align-items-center ml-2 c-pointer primary-color"
                                                                container="body" [autoClose]="'outside'"
                                                                [ngbPopover]="sanctionPopContent" [popoverTitle]="sanctionPopTitle"
                                                                (click)="sanctionPopovertoggle(closePop)"
                                                                popoverClass="alert-card-popover no-arrow light-theme light-theme-no-radius sanction-reference-popover"
                                                                #closePop="ngbPopover"> {{'Readmore'| translate}}</a>
                                                        </td>
                                                    </tr>
                                                    <tr *ngIf="RCAList.length > 0">
                                                        <td class="text-dark-black text-capitalize">{{'Relations' | translate}}
                                                        </td>
                                                        <td class="w-55"></td>
                                                        <td class="text-capitalize">
                                                            <a class="d-inline-flex align-items-center ml-2 c-pointer primary-color"
                                                                container="body" [autoClose]="'outside'"
                                                                [ngbPopover]="RCAContent" [popoverTitle]="RCATitle"
                                                                triggers="manual" #RCApopoverRef="ngbPopover"
                                                                (click)="RCApopoverRef.open();RCAPopoverToggle(RCApopoverRef)"
                                                                popoverClass="alert-card-popover no-arrow light-theme light-theme-no-radius sanction-reference-popover"> {{'Readmore'| translate}}</a>
                                                        </td>
                                                    </tr>
                                                    <tr *ngIf="profileNote && profileNote.length > 0">
                                                        <td class="text-dark-black text-capitalize">{{'Notes' | translate}}</td>
                                                        <td class="w-55"></td>
                                                        <td class="text-capitalize text-dark-black"
                                                            *ngIf="profileInfo && profileInfo.length > profileNotesLength">
                                                            {{profileInfo}}
                                                            <a  [autoClose]="'outside'" [ngbPopover]="profileNotesBody"
                                                                triggers="manual" #popoverNotesRef="ngbPopover"
                                                                (click)="popoverNotesRef.open();notesPopovertoggle(popoverNotesRef)"
                                                                popoverClass="read-more-popover no-arrow light-theme light-theme-no-radius "
                                                                [popoverTitle]="profileNotesTitle" container="body"
                                                                class="d-inline-flex align-items-center ml-2 c-pointer primary-color readmore">{{'Readmore'| translate}}
                                                            </a>
                                                        </td>
                                                        <td class="profile_notes text-dark-black text-capitalize"
                                                        *ngIf="profileInfo && profileInfo.length <= profileNotesLength">
                                                        {{profileInfo}}
                                                      </td>
                                                    </tr>

                                                    <tr *ngIf="inactiveAsOf && inactiveAsOf.attrName">
                                                        <td class="text-dark-black text-capitalize">{{inactiveAsOf.attrName}}
                                                        </td>
                                                        <td class="w-55"></td>
                                                        <td class="text-dark-black text-capitalize">
                                                             {{ inactiveAsOf.attrVal}}
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </mat-tab>
                                <mat-tab>
                                    <ng-template mat-tab-label>
                                        <span class="text-on-surface">{{'CustomerInformation' | translate}}</span>
                                    </ng-template>
                                    <div permission [domainPermission]="permissionIdsList | getPermissionId : 'entity Information'"
                                        class="entity-info-st">
                                        <div class="table-responsive custom-scroll-wrapper info-table" tabindex="2">
                                            <app-alert-customer-information [customerInfo]= "currentRowData"></app-alert-customer-information>
                                        </div>
                                    </div>
                                </mat-tab>
                            </mat-tab-group>

                        </div>

                    </div>
                </div>
            </div>
            <div class="col-md-11 tabcontent" id="vla">
                <button id="multiSource" style="display:none" (click)="vlaExpand()"></button>
                <div class="h-100 position-relative vla" permission
                    [domainPermission]="permissionIdsList | getPermissionId : 'visual Link Analysis'">
                    <div class="d-inline-flex" *ngIf="!vlaChartDataNotFound">
                        <span class="material-icons f-23 c-pointer text-dark-black " id="zoomOutVlaIcon"
                            (click)="vlaZoomOut()">
                            zoom_out
                        </span>
                        <input type="range" min="1" max="200" name="vlaZoomIn" [(ngModel)]="vlaZoomIn" value="0"
                            class="vlaZoom mx-3" id="vlaZoom">
                        <span class="material-icons f-23 c-pointer text-dark-black " id="zoomInVlaIcon"
                            (click)="zoomIn()">
                            zoom_in
                        </span>
                    </div>
                    <div class="text-right d-inline-block float-right mr-3 vla-dropdown no-pink-form">
                        <mat-form-field class="text-dark-black">
                            <mat-select #mySel id="mySel" name="mySel" placeholder="{{'ShowScreeningResultsBasedOn' | translate}}:"
                                [(ngModel)]="userType" multiple>
                                <mat-option (click)="toggleAllSelection()" [value]="0">All</mat-option>
                                <mat-option class="matOption" *ngFor="let filters of userTypeFilters" [value]="filters"
                                    (click)="tosslePerOne(filters)">
                                    {{filters}}
                                </mat-option>
                                <div class="ag-theme-balham custom-filter-button bg-transparent py-4 px-4">
                                    <div class="ag-filter">

                                        <div class="ag-filter-apply-panel border-0" id="applyPanel">
                                            <button (click)="cancelFilters();mySel.close();" type="button"
                                                id="clearButton"
                                                class="bg-transparent border-0 f-14  light-theme-btn secondary-btn">{{'Clear' | translate}}</button>
                                            <button (click)="mySel.close();applyFilters();" type="button"
                                                class="bg-transparent border-0 f-14 light-theme-btn primary-btn"
                                                id="applyButton">{{'Apply' | translate}}</button>
                                        </div>

                                    </div>
                                </div>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="text-center text-on-surface vla-loader position-absolute d-flex align-items-center justify-content-center"
                        *ngIf="vlaChartLoader">
                        <i class="fa fa-spinner txt-on-surface-06 fa-pulse" style="font-size:4.0rem;"></i>
                    </div>

                    <div id="VLA" class="position-relative w-100 h-100">
                        <div *ngIf="!vlaChartLoader && vlaChartDataNotFound"
                            class="d-flex align-items-center justify-content-center h-100">
                            <div class="text-center text-coral-red">{{'DataNotFound' | translate}}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-11 tabcontent" id="related">
                <app-related-alerts [alertInfo]="currentRowData" (alertChanged)="alertChangedFromRelatedAlertTab($event)"></app-related-alerts>
                <!-- <p>Related Risk Info</p> -->
            </div>
        </div>
    </div>

    <div class="modal-footer">
        <button *ngIf="!alertPopUpByEntity" class="btn light-theme-btn secondary-btn" (click)="closeModal()">
            {{'Cancel' | translate}}
        </button>
        <button style="display:none" class="btn light-theme-btn secondary-btn" (click)="rejectEntity()" permission
            [domainPermission]="permissionIdsList | getPermissionId : 'reject All'"
            [disabled]="currentAlertStatus == 'identity rejected' || currentAlertStatus == 'primary processed'">
            {{'RejectAll' | translate}}
        </button>
        <button style="display:none" class="btn btn-primary light-theme-btn primary-btn" (click)="saveEntity(content)"
            permission [domainPermission]="permissionIdsList | getPermissionId : 'approve'"
            [disabled]="currentAlertStatus == 'identity rejected' || currentAlertStatus == 'primary processed' ">
            {{'Approve' | translate}}
        </button>
        <div class="alert-matform-field mr-5" >
            <mat-form-field class="light-theme-no-radius" [ngClass]="{'c-ban' : alertStatusPermissionFlag }"  permission
            [domainPermission]="permisionIds['Change alert status']">
                <mat-select [(ngModel)]="newStatus" [disabled]="alertStatusPermissionFlag"  [ngClass]="{'c-ban' : alertStatusPermissionFlag }">
                    <mat-option *ngFor="let item of AllowedStatusList;trackBy:trackByValuesCode" [(value)]="item.values.code" permission [domainPermission]="permisionIds['Change alert status']"
                        [ngClass]="{'disable c-ban' : (item.disable != 'undefined' && item.disable ) }"
                        (click)="(item.disable != 'undefined' && item.disable ) ? '' : setTransition(currentAlertStatus,item)"
                        [disabled]="item.disable != 'undefined' && item.disable ">
                        <span>
                            <i class="fa fa-{{item.values.icon}} mr-4" style="font-size: 19px;"
                                [ngStyle]="{'color':getColor(item.values.colorCode)}"></i>
                        </span>{{item.values.displayName | translate}}
                    </mat-option>
                    <mat-select-trigger>
                        <i class="fa fa-{{selectedIcon}} selected-icon f-20 mr-2 align-middle"
                            [ngStyle]="{'color':getColor(selectedIconColor)}">
                        </i>{{getSelectedStatusDisplayValue(newStatus) | translate}}
                    </mat-select-trigger>
                </mat-select>
            </mat-form-field>

        </div>
    </div>

    <div class="text-center text-on-surface prev-next-loader position-absolute d-flex align-items-center justify-content-center"
        *ngIf="nextprev">
        <span class="fa fa-spinner fa-pulse"></span>
    </div>
</ng-template>

<ng-template #alertCardBody style="background:#1d1d1d" let-modal>

    <div class="modal-header d-block mb-4 pb-3 light-theme-border-bottom">
      <h3 class="text-dark-black pull-left">
        <button *ngIf="prevButton == true" class="pn-btn border-0 ml-2 light-theme-surface" (click)="getPrevRow()"><i class="material-icons"
            tooltipClass="light-theme-tooltip" ngbTooltip="Previous">keyboard_arrow_up
          </i></button>
        <button *ngIf="prevButton == false" class="pn-btn border-0 ml-2 light-theme-surface btn-disabled" [disabled]="prevButton == false" (click)="getPrevRow()"><i class="material-icons"
            tooltipClass="light-theme-tooltip" ngbTooltip="Previous">keyboard_arrow_up
            </i></button>
        <button *ngIf="nextButton == true" class="pn-btn border-0 light-theme-surface ml-2" (click)="getNextRow()"><i class="material-icons"
            tooltipClass="light-theme-tooltip" ngbTooltip="Next">keyboard_arrow_down
          </i> </button>
        <button *ngIf="nextButton == false" class="pn-btn border-0 light-theme-surface ml-2 btn-disabled" [disabled]="nextButton == false" (click)="getNextRow()"><i class="material-icons"
            tooltipClass="light-theme-tooltip" ngbTooltip="Next">keyboard_arrow_down
          </i> </button>
        {{'Alerts' | translate}}
      </h3>
      <div class="icon-align">
        <span [PemissionHide]='true' permission [domainPermission]="permissionIdsList | getPermissionId : 'comment Box'">
            <span (click)="getCommentDataForAlertCard(getRowDataOnClick,modalContent)">
                <i class="material-icons alert-card-text-dark-black">
                    chat
                </i>
            </span>
            <span matTooltipPosition="left" class="count text-dark-black align-top"
                [matTooltip]="commentListItemsCount?.toString().length > 3 ? commentListItemsCount : ''">{{commentListItemsCount}}</span>
        </span>

        <span class="clockIcon c-pointer" permission
            [domainPermission]="permissionIdsList | getPermissionId : 'alert Auditing'" (click)="showRightPanel(alertlist)"
            style="margin-right: 15px;">
            <i class="material-icons">
                restore
            </i>
        </span>
        <span class="c-pointer f-20 pull-right text-dark-black" (click)="closeModal()"><i
                class="material-icons text-dark-black">close</i></span>

    </div>
    </div>

    <div class="modal-body mt-4 overflow-hidden">

      <div class="radius-10 m-0 px-3 py-4 mb-3 d-flex align-items-center theme-light-black-bg light-theme-no-radius"
        style="background:#4d4d4d">
        <div class="d-flex align-items-center">
          <span class="rounded-circle d-inline-flex align-items-center justify-content-center theme-button-bg"
            style="width: 40px;height: 40px;background: #424242;">
            <i class="material-icons f-20 text-dark-black" *ngIf="entityType ==='person'">
                person
            </i>
            <i class="material-icons f-20 text-dark-black" *ngIf="entityType ==='organization'">
                business
            </i>
          </span>

          <div class="d-flex align-items-center flex-column ml-3">
            <span
              class="f-20 mb-0 card-title font-medium pr-5 text-dark-black text-on-surface mb-2">{{alertCard['name']? alertCard['name']:"N/A" }}</span>
            <span
              class="f-14 d-block mb-0 card-title font-medium pr-5 text-dark-black text-on-surface align-self-start">{{alertCard['name']? alertCard['name']:"N/A" }}</span>
          </div>
        </div>

        <div class="pr-0">
          <span class="text-capitalize text-dark-black text-on-surface d-block f-14 mb-2">{{'AlertId' | translate}} :
            {{ getRowDataOnClick['alertId'] ?  getRowDataOnClick['alertId']:"N/A"}} </span>
          <span class="text-capitalize f-14 text-dark-black text-on-surface">{{'Created' | translate}} :
            {{ getRowDataOnClick['createdDate'] ?  (getRowDataOnClick['createdDate'] | dateTranslated | async) :"N/A"}} </span>
        </div>

        <div class="pr-4">
          <span class="d-block f-14 text-capitalize text-dark-black text-on-surface mb-2 ml-5">{{'GroupLevels' | translate}}
            :<span
              class="card-value font-weight-bold ml-3 font-medium text-on-surface">{{ getRowDataOnClick.completeRowData.groupLevel ? getRowDataOnClick.completeRowData.groupLevel :"N/A"  }}</span>
          </span>
          <span class="f-14 text-dark-black text-on-surface ml-5">{{'Assignee' | translate}} :<span
              class="card-value f-12 font-weight-bold ml-3 font-medium text-on-surface">{{ getRowDataOnClick['assignee']? (getRowDataOnClick['assignee'].key | translate) :'N/A'  }}</span>
          </span>
        </div>

        <div class="pr-0">
            <span *ngIf="getRowDataOnClick['relatedCaseId']" class="text-capitalize text-dark-black text-on-surface d-block f-14 mb-2">{{'CaseId' | translate}} :
                <a *ngIf="getRowDataOnClick['relatedCaseId']; else pending" (click)="navigateToCasePage()" >{{getRowDataOnClick['relatedCaseId']}}</a>
                <ng-template #pending>{{ 'Pending' | translate }}...</ng-template>
            </span>
            <span class="text-capitalize f-14 text-dark-black text-on-surface"></span>
          </div>


        <div class="d-flex ml-5" *ngIf="checkTabSelected =='Adverse Media Articles'">
            <div class="row mt-3">
                <div class="col-4 col-sm-2"><p class="d-flex align-items-center f-14 mr-3 mt-4 text-dark-black">{{ 'Status' | translate }}</p></div>
                <div class="col-8 col-sm-5"> <div class="alert-matform-field mr-1 mt-3">
                    <mat-form-field class="light-theme-light-black light-theme-no-radius" [ngClass]="{'c-ban' : alertStatusPermissionFlag}" permission [domainPermission]="permisionIds['Change alert status']">
                        <mat-select [(ngModel)]="alertCard.statusDetails.key" [disabled]="alertStatusPermissionFlag" [ngClass]="{'c-ban' : alertStatusPermissionFlag}" permission [domainPermission]="permisionIds['Change alert status']">
                            <mat-option *ngFor="let item of AllowedStatusList;trackBy:trackByValuesCode" [(value)]="item.values.code"
                                [ngClass]="{'disable c-ban' : (item.disable != 'undefined' && item.disable ) }"
                                [disabled]="item.disable != 'undefined' && item.disable "
                                (click)="(item.disable != 'undefined' && item.disable ) ? '' : updateStatusfromalertCard(item)">
                                <span>
                                    <i class="fa fa-{{item.values.icon}} mr-4" style="font-size: 19px;"
                                        [ngStyle]="{'color':getColor(item.values.colorCode)}"></i>
                                </span>{{item.values.displayName | translate}}
                            </mat-option>
                            <mat-select-trigger>
                                <i class="fa fa-{{selectedIcon}} selected-icon f-20 mr-2 align-middle"
                                    [ngStyle]="{'color':getColor(selectedIconColor)}">
                                </i>{{getSelectedStatusDisplayValue(alertCard.statusDetails.key)}}
                            </mat-select-trigger>
                        </mat-select>
                    </mat-form-field>
                </div>
               </div>

                <div class="w-100"></div>
                <div class="col-4 col-sm-2 mt-3"><p class="d-flex align-items-center f-14 mr-2 mt-3 text-dark-black">{{'Reasons' | translate}}</p></div>
                <div class="col-8 col-sm-5 mt-3"> <div class="alert-matform-field">
                    <mat-form-field class="light-theme-light-black light-theme-no-radius">
                        <mat-label
                            *ngIf="alertCard.statusDetails && (!alertCard.statusDetails.reasonList  ||alertCard.statusDetails.reasonList.length == 0)">
                            {{ 'Select reasons' | translate }}</mat-label>
                        <mat-select panelClass="reason-display-length" [(ngModel)]="alertCard.statusDetails.reasonList" multiple (closed)="updateReasons()">
                            <mat-option *ngFor="let item of alertCard.statusDetails?.reasons;trackBy:trackByReason" [(value)]="item.reason">
                                {{item.reason | translate}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div></div>
              </div>
          </div>
        <div class="pr-5 d-flex ai-c relatedCountBtn">
            <button type="button" class="btn btn-link" [disabled]="relatedAlertsCountPhase02 == 0" (click)="changeActiveAlertCardPanel('alertCardRelated')">{{'Related Alerts' | translate}}
                <span>{{ relatedAlertsCountPhase02 }} </span>
            </button>
        </div>
      </div>

      <div class="row scroll-row">
        <div class="col-md-1 height-100 z-999 pr-0 ">
          <div class="sidebar light-theme-surface">
            <ul class="d-block custom-list-wrapper pad-l0 list-unstyled">
              <li class="text-center">
                <a (click)="changeActiveAlertCardPanel('alertCardGeneral')"
                  [ngClass]="{'active':alertCardActiveTab === 'alertCardGeneral'}"><i
                    class="fa fa-list-ul text-dark-black"></i></a>
              </li>
              <li class="text-center">
                <a (click)="changeActiveAlertCardPanel('alertCardRelated')"
                  [ngClass]="{'active':alertCardActiveTab === 'alertCardRelated'}">
                  <i class="fa fa-exclamation-triangle text-dark-black"></i></a>
              </li>
            </ul>
          </div>
        </div>

        <div class="col-md-11 height-100 tabcontent" id="alertCardGeneral">

        <div class="row mx-0 mt-4 height-100 custom-scroll-wrapper custom-alert-row overflow-hidden">
            <div class="col-sm-3 p-0 height-100 border-right pr-3">
                <div class="col-xs-12 pad-x0 height-100 alert-custom-accordian custom-scroll-wrapper vertical-scroll-wrapper"
                style="padding-right:5px">
                <ngb-accordion #acc="ngbAccordion" (panelChange)="sourcePanelChange($event,entity)"
                  [activeIds]="[activePanelId]" *ngFor="let entity of accodrianData;trackBy:trackById">
                  <ngb-panel id="{{'panel-'+entity.id}}">
                    <ng-template ngbPanelTitle>
                      <span class="text-dark-black d-inline-flex align-items-center">
                        {{entity.first_name | translate}}
                        <div class="" *ngIf="entity.first_name === 'Adverse Media Articles'">
                          <div (click)="$event.stopPropagation()" ngbDropdown class="d-inline-block" [autoClose]="false">
                            <span class="material-icons" id="dropdownBasic1" ngbDropdownToggle>filter_list</span>
                            <div class="adverse-media-filter" ngbDropdownMenu aria-labelledby="dropdownBasic1">
                              <div (click)="$event.stopPropagation()">
                                <h3 class="text-dark-black">{{ 'Article Publication Date' | translate }}</h3>
                                <h3 class="text-dark-black">Jan 1, {{minValue}}-Dec 31,{{maxValue}}</h3>
                                <ngx-slider [(value)]="minValue" [(highValue)]="maxValue" [options]="options"></ngx-slider>
                              </div>
                              <div class="article-filter-element " (click)="$event.stopPropagation()">
                                <div class="alert-matform-field">
                                  <mat-form-field class="light-theme-light-black light-theme-no-radius position-relative">
                                    <div class="position-relative">
                                      <mat-label class="custom-label">
                                        {{ 'Show media related to' | translate }}</mat-label>

                                      <mat-select #relationFilter [(value)]="adverseSelectedItems" multiple>
                                        <mat-checkbox class="mat-option" #relationsSelall
                                          (click)="$event.stopPropagation()"
                                          (change)="toggleAllAdverseSelected(relationsSelall)"
                                          [checked]="adverseSelectedItems.length == adverseListForDropDown.length">
                                          {{ 'Select All' | translate }}
                                        </mat-checkbox>
                                        <mat-option class="matOption" *ngFor="let filter of adverseListForDropDown"
                                          (click)="$event.stopPropagation()" [value]="filter">
                                          {{filter}}
                                        </mat-option>
                                        <div class="ag-theme-balham custom-filter-button bg-transparent py-4 px-4">
                                          <div class="ag-filter">
                                            <div class="ag-filter-apply-panel border-0" id="applyPanel">
                                              <button (click)="relationFilter.close();$event.stopPropagation();"
                                                type="button" id="clearButton"
                                                class="bg-transparent border-0 f-14  light-theme-btn secondary-btn">Cancel</button>
                                              <button ngbDropdownToggle
                                                (click)="relationFilter.close();filterAdverseMediaNews();$event.stopPropagation()"
                                                type="button"
                                                class="bg-transparent border-0 f-14 light-theme-btn primary-btn hide-toggle-icon"
                                                id="applyButton">{{ 'Apply' | translate }}</button>
                                            </div>
                                          </div>
                                        </div>
                                      </mat-select>
                                    </div>
                                  </mat-form-field>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </span>
                      <span class="text-dark-pastal-green mar-l5 text-dark-black" [ngStyle]="myStyle2"
                        style="cursor: pointer;">
                      </span>
                      <i class=" fa mar-l10 pull-right text-dark-black mt-2"
                        [ngClass]="{'fa-caret-down': entity.primaryOpen, 'fa-caret-left': !entity.primaryOpen}"></i>
                    </ng-template>
                    <ng-template ngbPanelContent>
                      <div class="c-pointer">
                        <p style="word-break: break-word;white-space:pre-wrap" class="text-dark-black p-3"
                          [ngClass]="{'active-item': ( (entity.first_name) === highlightrow) }"
                          *ngIf="alertCard.alertMetaData.results.screening[entity.first_name].length === 0 && entity.first_name !== 'Adverse Media Articles'"
                          (click)="selectedTab(entity.first_name,alertCard.alertMetaData.results.screening[entity.first_name][index],'')">
                          {{'No' | translate}} {{entity.first_name}} {{'available' | translate}}</p>
                      </div>
                      <div *ngIf="entity.first_name !== 'Adverse Media Articles' && entity.first_name !== 'jurisdiction'">
                        <ng-container
                          *ngFor="let screening of alertCard.alertMetaData.results.screening[entity.first_name];index as index ">
                          <div class="sources-list-details p-3 c-pointer"
                            [ngClass]="{'active-item': ((entity.first_name+index) === highlightrow) , 'ac-i':((entity.first_name+index) !== highlightrow)}"
                            (click)="selectedTab(entity.first_name,alertCard.alertMetaData.results.screening[entity.first_name][index],index)">
                            <p class="text-dark-black d-flex justify-content-between text-on-surface"
                              style="word-break: break-word;white-space:pre-wrap">
                              <span> {{screening.value}}</span>
                              <span
                                class="pull-right text-nowrap">{{getConfidencePercentage(screening.confidence)+"%"}}</span>
                            </p>
                          </div>
                        </ng-container>
                      </div>
                      <div *ngIf="entity.first_name === 'Adverse Media Articles'">
                        <ng-container
                          *ngFor="let financeList of alertCard.alertMetaData.results.screening[entity.first_name];index as index ">
                          <div class="sources-list-details p-3 c-pointer"
                            [ngClass]="{'active-item': ((entity.first_name+index) === highlightrow) , 'ac-i':((entity.first_name+index) !== highlightrow)}"
                            (click)="selectedTab(entity.first_name,alertCard.alertMetaData.results.screening[entity.first_name][index],index)">
                            <p class="text-dark-black d-flex justify-content-between text-on-surface"
                              style="word-break: break-word;">
                              <span>{{financeList.article_title}} </span>
                            </p>
                          </div>
                        </ng-container>
                        <ng-container
                          *ngIf="alertCard.alertMetaData.results.screening['Adverse Media Articles'].length === 0  && !alertUtilityObject.financeSpinner">
                          <div class="c-pointer">
                            <p style="word-break: break-word;white-space:pre-wrap" class="text-dark-black p-3"
                              [ngClass]="{'active-item': ( (entity.first_name) === highlightrow) }">
                              {{'No' | translate}} {{entity.first_name}} {{'Available' | translate}}</p>
                          </div>
                        </ng-container>
                        <ng-container
                          *ngIf="alertUtilityObject.financeSpinner && alertCard.alertMetaData.results.screening['Adverse Media Articles'].length === 0">
                          <div class="text-center">
                            <i class="fa fa-spinner txt-on-surface-06"></i>
                          </div>
                        </ng-container>
                      </div>
                      <div *ngIf="entity.first_name === 'jurisdiction'">
                        <ng-container
                          *ngFor="let screening of alertCard.alertMetaData.results.screening[entity.first_name];index as index ">
                          <div class="sources-list-details p-3 c-pointer"
                            [ngClass]="{'active-item': ((entity.first_name+index) === highlightrow) , 'ac-i':((entity.first_name+index) !== highlightrow)}"
                            (click)="selectedTab(entity.first_name,alertCard.alertMetaData.results.screening[entity.first_name][index],index)">
                            <p class="text-dark-black d-flex justify-content-between text-on-surface"
                              style="word-break: break-word;white-space:pre-wrap">
                              <span> {{screening.country}}</span>
                              <span class="pull-right text-nowrap">{{screening.risk}}</span>
                            </p>
                          </div>
                        </ng-container>
                      </div>

                    </ng-template>
                  </ngb-panel>

                </ngb-accordion>
              </div>
            </div>
            <div class="height-100"  id="descriptionWrapper"
              [ngClass]="{'col-sm-6': checkTabSelected ==='Adverse Media Articles','col-sm-9': checkTabSelected !=='Adverse Media Articles' }">
                <div>
                    <div class="row radius-10 m-0 p-4 theme-light-black-bg light-theme-no-radius" style="background:#4d4d4d"
                    *ngIf="((checkTabSelected =='pep' ||checkTabSelected =='sanction' || (checkTabSelected !=='Adverse Media Articles'  && checkTabSelected !=='jurisdiction')) && alertCard.alertMetaData.results.screening[checkTabSelected].length > 0);">
                    <div class="col-sm-12 text-on-surface f-14 d-flex justify-content-between">
                    <div class="d-flex flex-column">
                        <div class="d-flex">
                            <div class="match-slider" permission
                                [domainPermission]="permissionIdsList | getPermissionId : 'entity Information'">
                                <p class="d-inline-block f-14 mr-4 text-dark-black">{{'ShowMatchType' | translate}}</p>
                                <label
                                    class="switch ml-2 align-top custom-switch-wrapper filters-switch-wrapper bst-switch-wrapper center-align">
                                    <input name="override" type="checkbox" [checked]="showMatchType"
                                        (change)="showMatchType = !showMatchType">
                                    <span class="slider round"></span>
                                </label>
                            </div>
                            <div class="mx-4 text-nowrap">
                                <span popoverTitle="Pop title" container="body" class="c-pointer" [autoClose]="'outside'"
                                    [ngbPopover]="popContent"
                                    permission [domainPermission]="permissionIdsList | getPermissionId : 'comment Box'" [PemissionHide]='true'
                                    [popoverTitle]="popTitle"
                                    popoverClass="alert-comment-popover has-left-arrow alert-card-arrow light-theme light-theme-no-radius"
                                    #closePop="ngbPopover" placement="left"
                                    (click)="getCommentData(getRowDataOnClick,closePop,modalContent)">
                                    <i class="material-icons text-dark-black">
                                        chat
                                    </i>

                                    <span matTooltipPosition="left" class="count text-dark-black align-top"
                                        [matTooltip]="commentListItemsCount?.toString().length > 3 ? commentListItemsCount : ''">{{commentListItemsCount}}</span></span>
                            </div>
                            <!-- this is the place for system created status change -->
                            <p class="d-flex align-items-center mb-3 f-14 mr-3 text-dark-black">{{ 'Status' | translate }}: </p>
                            <div class="alert-matform-field mr-1">
                                <mat-form-field class="light-theme-light-black light-theme-no-radius" [ngClass]="{'c-ban' : alertStatusPermissionFlag}"  permission [domainPermission]="permisionIds['Change alert status']">
                                    <mat-select [(ngModel)]="alertCard.statusDetails.key" [disabled]="alertStatusPermissionFlag" [ngClass]="{'c-ban' : alertStatusPermissionFlag}"  permission [domainPermission]="permisionIds['Change alert status']">
                                        <mat-option *ngFor="let item of AllowedStatusList;trackBy:trackByValuesCode"
                                            [(value)]="item.values.code"
                                            [ngClass]="{'disable c-ban' : (item.disable != 'undefined' && item.disable ) }"
                                            [disabled]="item.disable != 'undefined' && item.disable "
                                            (click)="(item.disable != 'undefined' && item.disable ) ? '' : updateStatusfromalertCard(item)">
                                            <span>
                                                <i class="fa fa-{{item.values.icon}} mr-4" style="font-size: 19px;"
                                                    [ngStyle]="{'color':getColor(item.values.colorCode)}"></i>
                                            </span>{{item.values.displayName | translate}}
                                        </mat-option>
                                        <mat-select-trigger>
                                            <i class="fa fa-{{selectedIcon}} selected-icon f-20 mr-2 align-middle"
                                                [ngStyle]="{'color':getColor(selectedIconColor)}">
                                            </i>{{getSelectedStatusDisplayValue(alertCard.statusDetails.key)}}
                                        </mat-select-trigger>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <p class="d-flex align-items-center mb-3 f-14 mr-3 text-dark-black">{{'Reasons' | translate}} :</p>
                            <div class="alert-matform-field">
                                <mat-form-field class="light-theme-light-black light-theme-no-radius">
                                    <mat-label
                                        *ngIf="alertCard.statusDetails && (!alertCard.statusDetails.reasonList  ||alertCard.statusDetails.reasonList.length == 0)">
                                        Select reasons</mat-label>
                                    <mat-select panelClass="reason-display-length" [(ngModel)]="alertCard.statusDetails.reasonList" multiple
                                        (closed)="updateReasons()">
                                        <mat-option *ngFor="let item of alertCard.statusDetails?.reasons;trackBy:trackByReason"
                                            [(value)]="item.reason">
                                            {{item.reason | translate}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="alert-matform-field ml-4">
                            </div>
                        </div>
                    </div>
                    </div>
                    </div>
                    <div id="" *ngIf="checkTabSelected =='Adverse Media Articles'"
                        class="height-100 text-on-surface justify-content-between  pulseVisualizerText-wrapper ">
                        <div class="loader" *ngIf="alertUtilityObject.financeSpinner">
                        <i class="fa fa-spinner txt-on-surface-06"></i>
                        </div>
                        <div
                        *ngIf="!alertCardUtilityObject.adverseMediaData && alertCard &&  alertCard.alertMetaData &&  alertCard.alertMetaData.results &&  alertCard.alertMetaData.results.screening &&  alertCard.alertMetaData.results.screening[checkTabSelected] && alertCard.alertMetaData.results.screening[checkTabSelected].length > 0 "
                        class="theme-light-black-bg p-3 radius-10 mb-4" style="background:#4d4d4d;" id="descriptionHeader">
                        <div class="d-flex  justify-content-between">
                            <div>
                            <p class="mb-3 f-15"><span
                                class="font-weight-bold f-15 mr-2">{{'Classification' | translate}}:</span>{{financeArticleDetails.classification_1?.classes[0]}}<button
                                class="btn b-0 bg-transparent crime-btn text-blue pad-b0 pad-t0" name="reasonButton"
                                *ngIf="alertUtilityObject.isFactavailable"
                                (click)="alertUtilityObject.showReasons = !alertUtilityObject.showReasons; addQuestionAndAnswers()">
                                <span *ngIf="!alertUtilityObject.showReasons">show</span>
                                <span *ngIf="alertUtilityObject.showReasons">hide</span>
                                reasons</button></p>
                            <p class="mb-3 f-15 d-flex align-items-center">
                                <span class="font-weight-bold f-15 mr-2">{{'ClassificationVerfication' | translate}}:</span>
                                <span class="c-pointer mar-10"><i class="material-icons" (click)="likeClassifiationArtical()"
                                    [class.text-dark-pastal-green]="likeClassification == true">thumb_up</i> </span>
                                <span class="alert-classification">
                                <span class="dropdown-multiselect-wrapper" id="dropdown-multiselect-wrapper"
                                    (click)="dislikeClassifiationArtical()"
                                    [ngClass]="{'active_like':dislikeClassification === true}">
                                    <ng-multiselect-dropdown #dropdown placeholder=" " [data]="listForDropDown"
                                    [ngClass]="{'noData': listForDropDown.length <=0}" [(ngModel)]="selectedItems"
                                    [settings]="dropdownSettings" (onDropDownClose)="onDropDownClose($event)"
                                    (onSelect)="onItemSelect($event)" (onDeSelect)="OnItemDeSelect($event)">
                                    </ng-multiselect-dropdown>
                                </span>
                                </span>
                            </p>

                            <p class="mb-3 f-15">
                                <span class="font-weight-bold f-15 mr-2">Source:</span>
                                {{financeArticleDetails.source_url}}
                                <a href="{{financeArticleDetails.url}}" target="_blank" class="fa fa-external-link "></a>
                            </p>
                            <p class="mb-3 f-15"><span
                                class="font-weight-bold f-15 mr-2">Date:</span>{{financeArticleDetails.published | date:dateFormat.ShortDateFormat }}
                            </p>

                            </div>
                            <div class="alert-matform-field ml-3">
                            <p class="d-flex align-items-center mb-3 f-14 mr-3 text-dark-black">Status</p>
                            <div class="alert-matform-field">
                                <mat-form-field class="light-theme-light-black light-theme-no-radius">
                                <mat-select [(ngModel)]="alertCardUtilityObject.relatedArticleselectedStatus">
                                    <mat-option *ngFor="let item of alertCardUtilityObject.relatedArticleStatus;trackBy:trackByStatusValue"
                                    [(value)]="item.status_value" (click)=" updaterelatedArticleStatus(item)">
                                    {{item.status_value}}
                                    </mat-option>
                                    <mat-select-trigger>{{alertCardUtilityObject.relatedArticleselectedStatus}}
                                    </mat-select-trigger>
                                </mat-select>
                                </mat-form-field>
                            </div>
                            <p class="d-flex align-items-center mb-3 f-14 mr-3 text-dark-black">{{'Reasons' | translate}} :</p>
                            <div class="alert-matform-field mb-3">
                                <mat-form-field class="light-theme-light-black light-theme-no-radius">
                                <mat-label>{{ 'Select reasons' | translate }}</mat-label>
                                <mat-select panelClass="reason-display-length"
                                    [(ngModel)]="alertCardUtilityObject.relatedArticleselectedReason" multiple
                                    (closed)="updateRelatedArticleReasons()">
                                    <mat-option *ngFor="let item of alertCardUtilityObject.relatedArticleReasons;trackBy:trackByReason"
                                    [(value)]="item.reason">
                                    {{item.reason | translate}}
                                    </mat-option>
                                </mat-select>
                                </mat-form-field>
                            </div>
                            <mat-form-field class="light-theme-light-black"
                                *ngIf="(alertUtilityObject.article_sentiment && alertUtilityObject.article_sentiment.label)&&(alertCardUtilityObject.articleStatus == 'Approved, Needed Review'||alertCardUtilityObject.articleStatus == 'Rejected, Needed Review')">
                                <mat-select [(ngModel)]="alertUtilityObject.article_sentiment.label">
                                <mat-option *ngFor="let item of alertUtilityObject.articleSentimentList;trackBy:trackByLabel" [(value)]="item.label"
                                    (click)="changeSentiment(item)">
                                    <span class="d-flex ai-c">
                                    <i class="fa fa-{{item.values.icon}} mr-4" style="font-size: 19px;"
                                        [ngStyle]="{'color': item.values.colorCode}"></i>
                                    <span>{{item.label | translate}}</span>
                                    </span>
                                </mat-option>
                                <mat-select-trigger>
                                    <i *ngIf="alertUtilityObject.article_sentiment && alertUtilityObject.article_sentiment.values "
                                    class="fa fa-{{alertUtilityObject.article_sentiment.values.icon}} selected-icon f-20 mr-2 align-middle"
                                    [ngStyle]="{'color':alertUtilityObject.article_sentiment.values.colorCode}">
                                    </i> <span
                                    *ngIf="alertUtilityObject.article_sentiment && alertUtilityObject.article_sentiment.label">{{alertUtilityObject.article_sentiment.label}}</span>
                                </mat-select-trigger>
                                </mat-select>
                            </mat-form-field>
                            </div>
                        </div>
                        </div>
                        <div
                        *ngIf="!alertCardUtilityObject.adverseMediaData && alertCard &&  alertCard.alertMetaData &&  alertCard.alertMetaData.results &&  alertCard.alertMetaData.results.screening &&  alertCard.alertMetaData.results.screening[checkTabSelected] && alertCard.alertMetaData.results.screening[checkTabSelected].length > 0 "
                        class="gtranslate w-100 d-inline-flex" id="descriptionTitle">
                        <span class="mb-3 f-22 word-ba  text-dark-black">
                            {{financeArticleDetails.title}}
                        </span>
                        <span class="mb-3 f-15 h-30 translate_icon"
                            *ngIf="languageTranslateList && financeArticleDetails.title">
                            <mat-form-field class="" style="top: 5px;">
                            <span class="customtranslate">
                                <mat-icon [ngStyle]="{'color': alertCardUtilityObject.langselected ? 'rgb(102 173 234)' : white}">
                                g_translate</mat-icon>
                            </span>
                            <div class="mat-drop">
                                <mat-select id="countrySelect" name="country" required [(ngModel)]="selectedCountry"
                                [disableOptionCentering]="true">
                                <ng-container *ngFor="let country of languageTranslateList;trackBy:trackByCode">
                                    <mat-option *ngIf="country.code.toLowerCase().trim() != 'all'"
                                    [ngClass]="{'checkmark text-dark-black text-on-surface':country.code == selectedCountry}"
                                    [value]="country.code" (click)="selectedlang($event, country.displayName)">
                                    <span class="fa fa-icon"></span><i
                                        class="flag-icon w-25 pad-r3 mr-3 flag-icon-squared flag-icon-{{country.displayName.toLowerCase()}}"></i>
                                    {{country.code}} <span
                                        *ngIf="(alertCardUtilityObject.originalang == country.displayName || country.displayName == selectedCountryDisplayName) && alertCardUtilityObject.langselected">
                                        &nbsp; (Original)
                                    </span>
                                    </mat-option>
                                </ng-container>
                                </mat-select>
                            </div>
                            </mat-form-field>
                        </span>
                        </div>
                        <div class="custom-scroll-wrapper vertical-scroll-wrapper" id="descriptionContent">
                            <div *ngIf="!alertCardUtilityObject.adverseMediaData && alertCard &&  alertCard.alertMetaData &&  alertCard.alertMetaData.results &&  alertCard.alertMetaData.results.screening &&  alertCard.alertMetaData.results.screening[checkTabSelected] && alertCard.alertMetaData.results.screening[checkTabSelected].length > 0 ">
                                <p class="text-captalise f-14 lh-24 mb-4" id="displacy"></p>
                            </div>
                            </div>
                        </div>
              <div *ngIf="checkTabSelected =='jurisdiction' " class="text-on-surface justify-content-between">
                <div class="text-dark-black">
                  <p class="mb-3 f-15"><span class="font-weight-bold f-15 mr-2">Sources:</span> <span
                      *ngFor="let item of alertCard.alertMetaData.results.screening.selectedData.source;index as index">
                      {{item}}<span
                        *ngIf="index+1 !==alertCard.alertMetaData.results.screening.selectedData.source.length ">,</span>
                    </span>
                  </p>
                  <p class="mb-3 f-15"><span
                      class="font-weight-bold f-15 mr-2">Country:</span>{{alertCard.alertMetaData.results.screening.selectedData.country}}
                  </p>
                  <p class="mb-3 f-15"><span
                      class="font-weight-bold f-15 mr-2">Risk:</span>{{alertCard.alertMetaData.results.screening.selectedData.risk}}
                  </p>
                </div>


              </div>
              <div class="entity-identification-card-attributes"
                *ngIf="((checkTabSelected =='pep' ||checkTabSelected =='sanction' || (checkTabSelected !=='Adverse Media Articles'  && checkTabSelected !=='jurisdiction')) && alertCard.alertMetaData.results.screening[checkTabSelected].length > 0);">
                <mat-tab-group animationDuration="0ms">
                  <mat-tab>
                    <ng-template mat-tab-label>
                        <span class="text-on-surface">{{'GeneralAttributes' | translate}}</span>
                    </ng-template>
                    <div class="table-responsive custom-scroll-wrapper info-table" tabIndex="1">
                      <table class="table border-0 m-0">
                        <thead>
                          <tr>
                            <th class="text-dark-black f-14">{{'Attribute' | translate}}</th>
                            <th class="text-dark-black f-14">{{'EntityInformation' | translate}}</th>
                            <th class="text-dark-black f-14 w-55"></th>
                            <th class="text-dark-black f-14">{{'WatchlistInformation' | translate}}</th>
                            <th class="text-dark-black f-14" *ngIf="showMatchType">{{'MatchType' | translate}}</th>
                          </tr>
                        </thead>
                        <tbody class="alternate-row-colors"
                          *ngIf="( attributes && attributes.screening && attributes.screening.watchlists && attributes.screening.watchlists[0] && attributes.screening.watchlists[0].confidence) * 100 >= confidenceFilter">
                          <ng-container *ngFor="let item of attributesDetails">
                            <ng-container *ngIf="!item.watchlistAttrib">
                              <ng-container
                                *ngTemplateOutlet="attributesTemplate; context:{item:item ,watchlistAttribs:false} ">
                              </ng-container>
                            </ng-container>
                          </ng-container>
                          <tr *ngIf="profileNote && profileNote.length > 0">
                            <td class="text-dark-black text-capitalize">{{'Notes' | translate}}</td>
                            <td></td>
                            <td class=" w-55"></td>
                            <td class="profile_notes text-dark-black"
                              *ngIf="profileInfo && profileInfo.length > profileNotesLength">
                              {{profileInfo}}
                              <a [autoClose]="outside" [ngbPopover]="profileNotesBody" triggers="manual"
                                #popoverNotesRef="ngbPopover"
                                (click)="popoverNotesRef.open();notesPopovertoggle(popoverNotesRef)"
                                popoverClass="read-more-popover no-arrow light-theme light-theme-no-radius "
                                [popoverTitle]="profileNotesTitle" container="body"
                                class="d-inline-flex align-items-center ml-2 c-pointer primary-color">{{'Readmore'| translate}}
                              </a>
                            </td>
                            <td class="profile_notes text-dark-black text-capitalize"
                              *ngIf="profileInfo && profileInfo.length <= profileNotesLength">
                              {{profileInfo}}
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </mat-tab>
                  <mat-tab>
                    <ng-template mat-tab-label>
                        <span class="text-on-surface">{{'WatchlistAttributes' | translate}}</span>
                    </ng-template>
                    <div class="table-responsive custom-scroll-wrapper info-table" tabindex="1">
                      <table class="table border-0 m-0">
                        <thead>
                          <tr class="pad-l3">
                            <th class="text-dark-black f-14 pad-l3">{{'Attribute' | translate}}
                            </th>
                            <th class="w-55"></th>
                            <th class="text-dark-black f-14 pad-l3">
                              {{'Match Information' | translate}}
                            </th>
                            <th class="text-dark-black f-14 pad-l3" *ngIf="showMatchType">
                              {{'Match Type' | translate}}</th>
                          </tr>
                        </thead>
                        <tbody class="alternate-row-colors"
                          *ngIf="( watchlistData && watchlistData[0] && watchlistData[0].confidence) * 100 >= confidenceFilter">
                          <ng-container *ngFor="let item of attributesDetails">
                            <ng-container *ngIf="item.watchlistAttrib">
                              <ng-container
                                *ngTemplateOutlet="attributesTemplate; context:{item:item ,watchlistAttribs:true} ">
                              </ng-container>
                            </ng-container>
                          </ng-container>
                          <tr *ngIf="rolesText && rolesText.length > 0">
                            <td class="text-dark-black text-capitalize">{{'Roles' | translate}}</td>
                            <td class="w-55"></td>
                            <td class="text-dark-black text-capitalize" *ngIf="rolesText">
                              {{rolesText}}
                              <a class="d-inline-flex align-items-center ml-2 c-pointer primary-color readmore"
                                (click)="openRolesModal(rolesContent)">{{'Readmore'| translate}}</a>
                            </td>
                          </tr>
                          <tr *ngIf="referencesList.length > 0">
                            <td class="text-dark-black text-capitalize">{{'References' | translate}}
                            </td>
                            <td class="w-55"></td>
                            <td class="text-capitalize">
                              <a class="d-inline-flex align-items-center ml-2 c-pointer primary-color" container="body"
                                [autoClose]="'outside'" [ngbPopover]="sanctionPopContent"
                                [popoverTitle]="sanctionPopTitle" (click)="sanctionPopovertoggle(closePop)"
                                popoverClass="alert-card-popover no-arrow light-theme light-theme-no-radius sanction-reference-popover"
                                #closePop="ngbPopover"> {{'Readmore'| translate}}</a>
                            </td>
                          </tr>
                          <tr *ngIf="RCAList.length > 0">
                            <td class="text-dark-black text-capitalize">{{'Relations' | translate}}
                            </td>
                            <td class="w-55"></td>
                            <td class="text-capitalize">
                              <a class="d-inline-flex align-items-center ml-2 c-pointer primary-color" container="body"
                                [autoClose]="'outside'" [ngbPopover]="RCAContent" [popoverTitle]="RCATitle"
                                triggers="manual" #RCApopoverRef="ngbPopover"
                                (click)="RCApopoverRef.open();RCAPopoverToggle(RCApopoverRef)"
                                popoverClass="alert-card-popover no-arrow light-theme light-theme-no-radius sanction-reference-popover">
                                {{'Readmore'| translate}}</a>
                            </td>

                          </tr>
                          <tr *ngIf="inactiveAsOf && inactiveAsOf.attrName">
                            <td class="text-dark-black text-capitalize">{{inactiveAsOf.attrName}}
                            </td>
                            <td class="w-55"></td>
                            <td class="text-dark-black text-capitalize">
                              {{ inactiveAsOf.attrVal}}
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </mat-tab>
                  <mat-tab>
                    <ng-template mat-tab-label>
                        <span class="text-on-surface">{{'CustomerInformation' | translate}}</span>
                    </ng-template>
                    <div permission [domainPermission]="permissionIdsList | getPermissionId : 'entity Information'"
                        class="entity-info-st">
                        <div class="table-responsive custom-scroll-wrapper info-table" tabindex="2">
                            <app-alert-customer-information [customerInfo]= "loadCustomerInfo"></app-alert-customer-information>
                        </div>
                    </div>
                </mat-tab>
                </mat-tab-group>
              </div>

              <div class="d-flex align-items-center justify-content-center height-100"
                *ngIf="!alertCard || !alertCard.alertMetaData || !alertCard.alertMetaData.results || !alertCard.alertMetaData.results.screening || !alertCard.alertMetaData.results.screening[checkTabSelected] || alertCard.alertMetaData.results.screening[checkTabSelected].length === 0 ||  alertCardUtilityObject.adverseMediaData">
                <span class="text-coral-red">{{'DataNotFound' | translate}}</span>
              </div>
            </div>
        </div>
        <div class="col-sm-3 p-0 height-100 alert-custom-accordian custom-scroll-wrapper vertical-scroll-wrapper"
                       *ngIf="!alertCardUtilityObject.adverseMediaData && alertCard &&  alertCard.alertMetaData &&  alertCard.alertMetaData.results &&  alertCard.alertMetaData.results.screening &&  alertCard.alertMetaData.results.screening[checkTabSelected] && alertCard.alertMetaData.results.screening[checkTabSelected].length > 0 ">
                <div *ngIf="checkTabSelected ==='Adverse Media Articles' && !alertCardUtilityObject.adverseMediaData && ! alertCardUtilityObject.langselected">
                <h3>{{'Keywords' | translate}}</h3>
                <div class="keyword-filter-box" *ngIf="financeArticleDetails.resultskeywords">
                    <span>{{'ShowOnlyRelatedEntities' | translate}}</span>
                    <label class="switch mar-l25 custom-switch-wrapper filters-switch-wrapper bst-switch-wrapper">
                    <input type="checkbox" class="custom-switch-checkbox" [(ngModel)]="showOnlyRelatedEntities"
                        id="showOnlyRelatedEntitiesCheckbox" (click)="toggleShowOnlyRelatedEntities($event)">
                    <span class="slider round"></span>
                    </label>
                </div>
                <ngb-accordion #keywordacc="ngbAccordion" class="custom-accordion"
                    [activeIds]="activeKeywordsPanels"
                    *ngFor="let keywordTabs of financeArticleDetails.resultskeywords;index  as tabindex;trackBy:trackByType">
                    <ngb-panel id="{{'keytab'+keywordTabs.type}}">
                    <ng-template ngbPanelTitle>
                        <span class="text-dark-black">
                        <mat-checkbox class="mr-2" id="keywordTabs{{tabindex}}" [(ngModel)]="keywordTabs.tabCheck" [disabled]="showOnlyRelatedEntities"
                            (change)="highlightKeywords(tabindex, -1, keywordTabs.tabCheck)"></mat-checkbox>
                        {{keywordTabs.type}}
                        </span>
                        <span class="text-dark-pastal-green mar-l5 text-dark-black" [ngStyle]="myStyle2"
                        style="cursor: pointer;">
                        </span>
                    </ng-template>
                    <ng-template ngbPanelContent>
                        <ng-container *ngFor="let keywords of getUniqueKeywordList(keywordTabs.values);index as valueindex;trackBy:trackByName">
                        <div class="sources-list-details p-3 c-pointer" *ngIf="!keywords.disabled">
                            <p class="text-dark-black d-flex align-item-center" style="word-break: break-word;">
                            <mat-checkbox class="mr-2" id="keyword{{valueindex}}-{{tabindex}}"
                                [(ngModel)]="keywords.checked"
                                (change)="highlightKeywords(tabindex,valueindex,keywords.checked,('keyword'+valueindex+'-'+tabindex))">
                            </mat-checkbox>

                            <label for="keyword{{valueindex}}"
                                class="mb-0 f-15 font-weight-normal">{{keywords.name}}</label>
                            </p>
                        </div>
                        </ng-container>
                    </ng-template>
                    </ngb-panel>
                </ngb-accordion>
                </div>
            </div>
          </div>
        </div>

        <div class="col-md-11 tabcontent" id="alertCardRelated" style="display: none">
             <app-related-alerts [alertInfo]="currentRowData" (alertChanged)="alertChangedFromRelatedAlertTab($event)"></app-related-alerts>
        </div>

      </div>

    </div>

    <div class="text-center text-on-surface prev-next-loader position-absolute d-flex align-items-center justify-content-center"
        *ngIf="nextprev">
        <span class="fa fa-spinner fa-pulse"></span>
    </div>
</ng-template>


<div id="sanctionRef">
    <ng-template #sanctionPopTitle>
        <div class="d-flex w-100 justify-content-between align-items-center">
            <h3 class="f-20 gotham-medium mb-0  text-dark-black text-capitalize">
                {{'References' | translate}}
            </h3>
            <i (click)="sanctionPopovertoggle()"
                class="material-icons text-dark-black c-pointer text-on-surface">close</i>
        </div>
    </ng-template>
    <ng-template #sanctionPopContent>
        <div class="table-responsive height-100 custom-scroll-wrapper">
            <table class="table table-borderless references-table text-capitalize text-dark-black text-on-surface ">
                <thead>
                    <tr>
                        <th>{{'ListType' | translate}}</th>
                        <th>{{'ReferenceName' | translate}}</th>
                        <th>{{'Status' | translate}}</th>
                        <th>{{'Period' | translate}}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let reference of referencesList">
                        <td>{{reference.list_type}}</td>
                        <td>{{reference.reference_name}}</td>
                        <td>{{reference.status}}</td>
                        <td>{{reference.since_date}}<span
                                *ngIf="reference.since_date && reference.to_date">-</span>{{reference.to_date}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </ng-template>
</div>
 <ng-template #rolesContent>
    <div class="modal-header d-flex light-theme-border-bottom align-items-center">
        <h3 class="text-dark-black pull-left">{{'Roles'| translate}}</h3>
        <span class="c-pointer f-20 pull-right text-dark-black" (click)="closeRolesModal()"><i
                class="material-icons text-dark-black">close</i></span>
    </div>
    <div class="modal-body table-responsive custom-scroll-wrapper">
        <table class="table table-borderless roles-info">
            <tr class="roles-header text-dark-black roles-theme-color light-theme-surface">
                <th>{{'Occupation' | translate}}</th>
                <th>{{'OccupationType' | translate}}</th>
                <th>{{'Period'| translate}}</th>
            </tr>
            <tbody *ngFor="let roles of alertCardUtilityObject.rolesArry">
                <tr class="roles-subheader light-theme-surface">
                    <th colspan="3" class='text-dark-black roles-theme-color'>{{roles.role}}</th>
                </tr>
                <tr class="roles-subheader light-theme-surface" *ngFor="let result of roles.value">
                    <td class='text-dark-black roles-theme-color'>{{result.occupation}}</td>
                    <td class='text-dark-black roles-theme-color'>{{result.occupation_type}}</td>
                    <td class='text-dark-black roles-theme-color'><span *ngIf="(!result.since_date && !result.to_date)">NA </span>
                        <span *ngIf="(!result.since_date && result.to_date) "> NA&nbsp;-&nbsp;</span><span [innerHTML]="ValidateDate(result.since_date)"></span>
                        <span *ngIf="result.since_date && result.to_date">&nbsp;-&nbsp;</span><span [innerHTML]="ValidateDate(result.to_date)"></span>
                        <span *ngIf="(result.since_date && !result.to_date) "> &nbsp;-&nbsp;NA  </span>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</ng-template>
<ng-template #attributesTemplate let-item="item" let-watchlistAttribs="watchlistAttribs" >
    <tr>
        <td class="text-dark-black text-capitalize va-m" >
            {{ item.displayName | translate }}
        </td>
        <ng-template #recordedValuePopup>
            <div class="text-on-surface text-dark-black" [innerHTML]="ValidateDate(item.recordedValue)"></div>
        </ng-template>
        <td *ngIf="!watchlistAttribs" class="text-dark-black d-flex align-items-center justify-content-between mnh-55">

            <span *ngIf="!(item.name.toLowerCase() == 'identifier' ||  item.name.toLowerCase() == 'identifiers')"
                class="entity-info ellipses-text c-pointer" container="body" [autoClose]="'outside'"
                popoverClass="word-ba transition-none light-theme body-text-white no-arrow mxw-300 mxh-250 overflow-auto custom-scroll-wrapper light-theme-no-radius"
                [ngbPopover]="recordedValuePopup">
                {{item.displayName != "Domiciled In" ? ValidateDate(item.recordedValue) : (item.recordedValue && item.recordedValue.length != 2) ? ValidateDate(item.recordedValue) : fullJursidictionName(item.recordedValue)}}

            </span>

            <span *ngIf="(item.name.toLowerCase() == 'identifier' ||  item.name.toLowerCase() == 'identifiers')"
                class="entity-info ellipses-text c-pointer" container="body" [autoClose]="'outside'"
                popoverClass="word-ba 4 transition-none light-theme  no-arrow mxw-355 mxh-250 overflow-auto custom-scroll-wrapper light-theme-no-radius"
                [ngbPopover]="recordedValuePopup" [innerHTML]="item.recordedValue">
            </span>

            <ng-template #title>
                <div class="d-flex w-100 justify-content-between align-items-center">
                    <h3 class="f-20 gotham-medium mb-0  text-dark-black">
                        {{ item.displayName | translate }}
                    </h3>
                    <i class="material-icons text-dark-black c-pointer" (click)="popover.close()">close</i>
                </div>
            </ng-template>
            <ng-template #body>
                <div class="mxh-300 custom-scroll-wrapper overflow-auto">

                    <p *ngFor="let source of item.sourcesListForToolTip;trackBy:trackBySourceName"
                        class="f-14 mb-3 word-ba gotham-regular text-dark-black">

                        <span
                            *ngIf="source.sourceName != 'bst' && (source.value.source_url && source.value.source_url != '')"
                            onclick="openById()" id="{{source.value.source_url}}"
                            class="mr-3 gotham-medium text-blue c-pointer"
                            style="-webkit-text-fill-color:#378FCE;">{{source.sourceName}}</span>

                        <ng-container *ngIf="!source.value.source_url || source.value.source_url == ''">
                            <span *ngIf="source.sourceName != 'bst'" onclick="openById()"
                                id="http://www.{{source.sourceName}}" class="mr-3 gotham-medium text-blue c-pointer"
                                style="-webkit-text-fill-color:#378FCE;">{{source.sourceName}}</span>
                        </ng-container>

                        <span *ngIf="source.sourceName === 'bst'" class="mr-3 gotham-medium text-dark-black">
                            {{source.sourceName}}
                        </span>
                        <span class="text-dark-black">
                            <span
                                *ngIf="item.name.toLowerCase() == 'identifier' ||  item.name.toLowerCase() == 'identifiers'"
                                [innerHTML]="source.displayValue">

                            </span>
                            <span
                                *ngIf="!(item.name.toLowerCase() == 'identifier' ||  item.name.toLowerCase() == 'identifiers') && item.displayName !='Domiciled In'">
                                {{source.displayValue | translate}}
                            </span>
                            <span
                                *ngIf="!(item.name.toLowerCase() == 'identifier' ||  item.name.toLowerCase() == 'identifiers') && item.displayName =='Domiciled In'">
                                {{source.displayValue && source.displayValue.length != 2 ? source.displayValue : fullJursidictionName(source.displayValue)}}
                            </span>
                        </span>

                        <span class="fa fa-check-circle align-middle ml-3" style="color:green;" aria-hidden="true"
                            *ngIf="source.sourceName == selectedSource">
                        </span>
                    </p>
                </div>
            </ng-template>
            <span [autoClose]="'outside'" [ngbPopover]="body"
                popoverClass="alert-card-popover no-arrow light-theme light-theme-no-radius" [popoverTitle]="title"
                #popover="ngbPopover" container="body" class="d-inline-flex align-items-center ml-2 c-pointer">
                <i class="material-icons text-dark-black">link</i>
                <span class="text-dark-black">
                    {{item.noOfSources}}</span>
            </span>
        </td>

        <ng-template #matchInfoPopover>
            <ul class="list-unstyled list_color_item light-theme-bg-white" *ngIf="item.name !== 'images'">
                <li
                    class="current_column p-3 text-capitalize light-theme-surface text-dark-black light-theme-border-bottom">
                    {{ item.displayName | translate }}</li>
                <li class="p-3 list_bottom_border text-dark-black light-theme-border-bottom"
                    *ngFor="let att of item.attributeValues">
                    {{ item.displayName === 'Source link address' ? att : ValidateDate(att)}}<span
                        [ngClass]="{'fa fa-check pull-right':(item.setvalue == att &&(item.confidenceBadgeClass ==='badge-success' ||item.confidenceBadgeClass ==='badge-warning'))}"></span>
                </li>
            </ul>
        </ng-template>
        <td class="text-dark-black c-pointer align-middle text-center">
            <span>
                <span *ngIf="item.showConfidenceBadge">
                    <span class="badge-width badge {{item.confidenceBadgeClass}} d-inline-flex align-items-center">
                        <i class="bagde" placement="top" *ngIf="item.confidenceBadgeIcon == '~'">~</i>
                        <span>{{item.confidencePercentage + '%'}}</span>
                        <i class="material-icons f-16 align-badgeicon" placement="top" *ngIf="item.confidenceBadgeIcon != '~'">
                          {{ item.confidenceBadgeIcon }} </i>
                    </span>
                </span>
            </span>
        </td>
        <td class="text-dark-black c-pointer align-middle">
            <span class="d-inline-flex align-items-center w-100">

                <ng-container *ngIf="item.showMatchInfo">
                    <span
                        *ngIf="!(item.name.toLowerCase() == 'identifier' ||  item.name.toLowerCase() == 'identifiers')"
                        style="padding-left: 40px"
                        class="entity-info c-pointer {{ item.name === 'source_links' ? '' : 'ellipses-text' }} w-100" container="body" [autoClose]="'outside'"
                        popoverClass="word-ba 5 transition-none light-theme  no-arrow mxw-300 mxh-250 overflow-auto custom-scroll-wrapper light-theme-no-radius"
                        [ngbPopover]="matchInfoPopover">
                        <span class="border-0 d-inline or d-inline-block w-100"
                            *ngFor="let attr of item.attributeValues;let index = index">

                            <ng-container *ngIf="item.name === 'source_links' && item.attributeValues[0] !== 'N/a'; else notSourceLinksTpl">
                              <span class="pad-5 radius-10 w-100"
                                 style="display: block; cursor: pointer; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"
                                 target="_blank">{{ attr }}</span>
                            </ng-container>

                            <ng-template #notSourceLinksTpl>
                            <ng-container *ngIf="item.name !== 'images'">
                                <span class="pad-5 radius-10 {{attr}}"
                                      style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width: 100%"
                                    [ngClass]="{'badge-success' :(item.setvalue == attr && item.confidenceBadgeClass ==='badge-success'),
                                     'badge-warning' :(item.setvalue == attr && item.confidenceBadgeClass ==='badge-warning')}">{{ValidateDate(attr)}}
                                    <ng-container
                                        *ngIf="item.attributeValues.length > 1  && index+1 !== item.attributeValues.length">
                                        ,</ng-container></span>
                            </ng-container>
                            <ng-container *ngIf="item.name === 'images' && index === 0">
                                <span *ngFor="let attr of item.attributeValues"
                                    style="height: 40px; width: 40px;display: inline-block;">
                                    <a href="{{attr}}" target="_blank"><img class="img-fluid" [src]="attr" onerror="this.parentNode.parentNode.remove()"
                                            style="height: 40px; width: 40px;" /></a></span>
                            </ng-container>
                            </ng-template>
                        </span>
                    </span>

                </ng-container>

            </span>
        </td>
        <td class="text-dark-black" *ngIf="showMatchType">
            <ng-container>
                {{item.matcher}}
            </ng-container>
        </td>
    </tr>


</ng-template>
<ng-template #profileNotesTitle>
    <div class="d-flex w-100 justify-content-between align-items-center">
        <h3 class="f-20 gotham-medium mb-0  text-dark-black">
            {{'Notes' | translate}}
        </h3>
        <span>
            <ngx-copy-to-clipboard target="#pnote" [action]="cut">
                <i class="fa fa-files-o text-dark-black c-pointer text-on-surface mar-r5" aria-hidden="true"></i>
            </ngx-copy-to-clipboard>

            <i (click)="notesPopovertoggle()" class="material-icons text-dark-black c-pointer text-on-surface">close</i>
        </span>

    </div>
</ng-template>
<ng-template #profileNotesBody>
    <div class="mxh-300 custom-scroll-wrapper overflow-auto">
        <p class="profile_notes text-dark-black" id="pnote">{{profileNote}}</p>
    </div>
</ng-template>
<ng-template #RCATitle>
    <div class="d-flex w-100 justify-content-between align-items-center" *ngIf="RCAList && RCAList.length>0">
        <h3 class="f-20 gotham-medium mb-0 text-dark-black">{{'Relations' | translate}}</h3>
        <span class="c-pointer f-20 pull-right text-dark-black" (click)="RCAPopoverToggle()"><i
                class="material-icons text-dark-black">close</i></span>
    </div>
</ng-template>
<ng-template #RCAContent>
    <div class="table-responsive height-100 custom-scroll-wrapper" *ngIf="RCAList && RCAList.length>0">
        <table class="table table-borderless references-table text-capitalize text-dark-black text-on-surface">
            <tr class="roles-header">
                <th>{{'RelationType' | translate}}</th>
                <th>{{'Name' |translate}}</th>
                <th>{{'Deceased' | translate}}</th>
                <th>{{'ReferenceID' | translate}}</th>
            </tr>
            <tbody>
                <tr class="roles-subheader" *ngFor="let relation of RCAList;trackBy:trackById">

                    <td><span *ngIf="relation && relation.id">{{relation.relationship}}</span></td>
                    <td>
                        <span *ngIf="relation && relation.first_name">{{relation.first_name}}&nbsp;</span>
                        <span *ngIf=" relation && relation.middle_name">{{relation.middle_name}}&nbsp;</span>
                        <span *ngIf="relation && relation.surname">{{relation.surname}}</span>
                    </td>
                    <td ><span *ngIf="relation && relation.deceased">{{ 'Yes' | translate }}</span>
                        <span *ngIf="relation && relation.deceased =='' || relation.deceased == null "> No </span>
                    </td>
                    <td><span *ngIf="relation && relation.id">{{relation.id}} </span></td>
                </tr>
            </tbody>
        </table>
    </div>
</ng-template>
